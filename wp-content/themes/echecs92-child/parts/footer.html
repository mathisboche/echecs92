<!-- wp:html -->
<footer role="contentinfo" class="cm-footer">
  <div class="cm-footer__container">
    <div class="cm-footer__left">
      <a href="/" class="cm-footer__logo-link" aria-label="Retour à l'accueil">
        <img src="/wp-content/themes/echecs92-child/assets/cdje92.svg" alt="Logo Comité des Échecs des Hauts-de-Seine" class="cm-footer__logo" />
      </a>
      <address class="cm-footer__address">
        17 rue Taillade<br />
        92700 Colombes
      </address>
    </div>
    <div class="cm-footer__center">
      <div class="cm-footer__list-block">
        <p class="cm-footer__title">Navigation</p>
        <nav class="cm-footer__nav" aria-label="Liens rapides">
          <ul class="cm-footer__links">
            <li><a href="/" class="cm-footer__link">Accueil</a></li>
            <li><a href="/clubs" class="cm-footer__link">Clubs</a></li>
            <li><a href="/competitions" class="cm-footer__link">Compétitions</a></li>
            <li><a href="/resultats" class="cm-footer__link">Résultats</a></li>
            <li><a href="/actualites" class="cm-footer__link">Actualités</a></li>
            <li><a href="/contact" class="cm-footer__link">Contact</a></li>
          </ul>
        </nav>
      </div>
      <div class="cm-footer__list-block">
        <p class="cm-footer__title">Informations</p>
        <nav class="cm-footer__legal" aria-label="Liens légaux">
          <ul class="cm-footer__legal-links">
            <li><a href="/mentions-legales" class="cm-footer__link">Mentions légales</a></li>
            <li><a href="/politique-confidentialite" class="cm-footer__link">Politique de confidentialité</a></li>
          </ul>
        </nav>
      </div>
    </div>
    <div class="cm-footer__right">
      <nav class="cm-footer__social" aria-label="Réseaux sociaux">
        <a href="https://instagram.com/echecs92" class="cm-footer__social-link" target="_blank" rel="noopener noreferrer">
          <svg viewBox="0 0 24 24" class="cm-footer__social-icon" aria-hidden="true" focusable="false">
            <rect x="3.5" y="3.5" width="17" height="17" rx="5" fill="none" stroke="currentColor" stroke-width="1.5"></rect>
            <circle cx="12" cy="12" r="4.2" fill="none" stroke="currentColor" stroke-width="1.5"></circle>
            <circle cx="17.2" cy="6.8" r="1.3" fill="currentColor"></circle>
          </svg>
          Instagram
        </a>
        <a href="https://linkedin.com/company/echecs92" class="cm-footer__social-link" target="_blank" rel="noopener noreferrer">
          <svg viewBox="0 0 24 24" class="cm-footer__social-icon" aria-hidden="true" focusable="false">
            <rect x="3.5" y="3.5" width="17" height="17" rx="3" fill="none" stroke="currentColor" stroke-width="1.5"></rect>
            <circle cx="8.1" cy="8.8" r="1.3" fill="currentColor"></circle>
            <path d="M8.1 11v7" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path>
            <path d="M12 11.2h1.8c1.4 0 2.4.9 2.4 2.6V18h-1.9v-4.2c0-.7-.4-1.2-1.1-1.2-.7 0-1.1.5-1.1 1.2V18H11V11.2h1z" fill="currentColor"></path>
          </svg>
          LinkedIn
        </a>
      </nav>
      <a href="mailto:contact@echecs92.com" class="cm-footer__contact">
        <svg viewBox="0 0 24 24" class="cm-footer__contact-icon" aria-hidden="true" focusable="false">
          <rect x="3.5" y="5.5" width="17" height="13" rx="2" fill="none" stroke="currentColor" stroke-width="1.5"></rect>
          <path d="M5 7l7 5 7-5" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        </svg>
        contact@echecs92.com
      </a>
      <small class="cm-footer__credit">© <span id="cm-footer-year"></span> Site réalisé par <a href="https://mathisboche.com" class="cm-footer__credit-link" target="_blank" rel="noopener noreferrer" data-mathis-trigger="link">Mathis Boche</a></small>
    </div>
  </div>
  <script>
    (function () {
      const footerYear = document.getElementById('cm-footer-year');
      if (footerYear) {
        footerYear.textContent = new Date().getFullYear();
      }

      const mathisLinks = document.querySelectorAll('[data-mathis-trigger="link"]');
      if (!mathisLinks.length) {
        return;
      }

      const SCRIPT_SRC = '/wp-content/themes/echecs92-child/assets/js/clubs.js';
      const PROVIDER_SELECTOR = 'script[data-mathis-provider="spectacle"]';
      const WAIT_TIMEOUT = 6000;
      const raf = window.requestAnimationFrame
        ? window.requestAnimationFrame.bind(window)
        : (callback) => window.setTimeout(callback, 32);
      let loaderPromise = null;

      const waitForSpectacle = () =>
        new Promise((resolve, reject) => {
          const startedAt = Date.now();
          const check = () => {
            if (typeof window.cdje92ShowMathisSpectacle === 'function') {
              resolve(window.cdje92ShowMathisSpectacle);
              return;
            }
            if (Date.now() - startedAt > WAIT_TIMEOUT) {
              reject(new Error('mathis spectacle unavailable'));
              return;
            }
            raf(check);
          };
          check();
        });

      const loadSpectacleScript = () =>
        new Promise((resolve, reject) => {
          const script = document.createElement('script');
          script.src = SCRIPT_SRC;
          script.async = true;
          script.dataset.mathisProvider = 'spectacle';
          script.addEventListener('load', resolve, { once: true });
          script.addEventListener('error', () => reject(new Error('mathis script load failed')), { once: true });
          (document.head || document.body || document.documentElement).appendChild(script);
        });

      const ensureSpectacle = () => {
        if (typeof window.cdje92ShowMathisSpectacle === 'function') {
          return Promise.resolve(window.cdje92ShowMathisSpectacle);
        }
        if (loaderPromise) {
          return loaderPromise;
        }
        if (document.querySelector(PROVIDER_SELECTOR)) {
          loaderPromise = waitForSpectacle()
            .then((fn) => {
              loaderPromise = null;
              return fn;
            })
            .catch((error) => {
              loaderPromise = null;
              throw error;
            });
          return loaderPromise;
        }
        loaderPromise = loadSpectacleScript()
          .then(() => waitForSpectacle())
          .then((fn) => {
            loaderPromise = null;
            return fn;
          })
          .catch((error) => {
            loaderPromise = null;
            throw error;
          });
        return loaderPromise;
      };

      const openFallback = () => {
        window.open('https://mathisboche.com', '_blank', 'noopener,noreferrer');
      };

      const handleMathisClick = (event) => {
        if (event) {
          event.preventDefault();
        }
        ensureSpectacle()
          .then((spectacle) => {
            if (typeof spectacle === 'function') {
              spectacle();
            } else {
              openFallback();
            }
          })
          .catch(openFallback);
      };

      mathisLinks.forEach((link) => {
        link.addEventListener('click', handleMathisClick);
      });
    })();
  </script>
</footer>
<!-- /wp:html -->
